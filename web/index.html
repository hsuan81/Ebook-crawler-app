<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電子書蟲</title>
</head>

<body>
    <h2>電子書蟲</h2>
    <form id="form" >
    <label for="epub_path">檔案輸出位置:</label>
    <input type="text" id="output_path">
    <label for="input_path">更新電子書檔案:</label>
    <input type="text" id="input_path">
    <button type="submit">開始</button>
    </form>
    <button onclick="onClick()">dfdf</button>

    <div id="progress" style="display: none;">
        進度: <span id="progress_message"></span>
    </div>

    <script type="text/javascript" src="/eel.js">
        const form= document.getElementById('form')
        form.addEventListener('submit',startCrawling)
        
        async function startCrawling(e) {
            const epubPath = document.getElementById('epub_path').value;
            const inputPath = document.getElementById('input_path').value;
            let action="get";
            if (inputPath) {
                action="update";
            }
            document.getElementById('progress').style.display = 'block';
            const data={"action": action, "epub_path": epubPath, "input_path": inputPath}
            await eel.start_crawl(data)();
        }

        eel.expose(update_progress);
        function update_progress(message) {
            document.getElementById('progress_message').innerText = message;
        }
    </script>
</body>

</html>